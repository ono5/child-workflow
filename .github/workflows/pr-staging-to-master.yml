name: create PR staging -> master

on:
  pull_request:
    branches:
      - staging
    types: [closed]

jobs:
  git-pr-release:
    if:
      # master以外のブランチらのPRがマージされた場合のみ実行
      github.event.pull_request.merged == true &&
      github.event.pull_request.head.ref != 'master'
    uses: ono5/parent-workflow/.github/workflows/create-pr.yml@release-0
    with:
      from-branch: staging
      into-branch: master
      pr-label: staging->master
      pr-template-path: .github/staging-to-master-template.erb
      pr-assignee: ${{ github.actor }}